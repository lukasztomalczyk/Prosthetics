@using Prosthetics.Components.Models.Dialog
@inject DialogService _dialogService

@typeparam TComponent where TComponent : ComponentBase

@code {
    [Parameter]
    public EventCallback<string> OnCloseEvent { get; set; } = new EventCallback<string>();
    [Parameter]
    public DialogConfig? Setup { get; set; }

    protected override async Task OnInitializedAsync()
    {
        // _dialogService.OnClose += DialogCloseEventHandler();
        await base.OnInitializedAsync();
        Setup.AddViewParameter(nameof(OnCloseEvent), OnCloseEvent);
    }

    public Action<dynamic> DialogCloseEventHandler() => (dynamic param) => { OnCloseEvent.InvokeAsync(typeof(TComponent).Name); };
}
